[2020:12:07:22:47:12.839 INF] Creating the host
[2020:12:07:22:47:13.292 INF] Starting up the host
[2020:12:07:22:47:13.296 DBG] Hosting starting
[2020:12:07:22:47:13.488 INF] Now listening on: http://localhost:5000
[2020:12:07:22:47:13.491 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:47:13.492 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:47:13.492 INF] Hosting environment: Development
[2020:12:07:22:47:13.492 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:47:13.492 DBG] Hosting started
[2020:12:07:22:47:49.777 DBG] Connection id "0HM4QT3T72RIV" received FIN.
[2020:12:07:22:47:49.781 DBG] Connection id "0HM4QT3T72RIV" accepted.
[2020:12:07:22:47:49.787 DBG] Connection id "0HM4QT3T72RIV" started.
[2020:12:07:22:47:49.788 DBG] Connection id "0HM4QT3T72RJ0" accepted.
[2020:12:07:22:47:49.788 DBG] Connection id "0HM4QT3T72RJ0" started.
[2020:12:07:22:47:49.794 DBG] Connection id "0HM4QT3T72RIV" sending FIN because: "The client closed the connection."
[2020:12:07:22:47:49.796 DBG] Connection id "0HM4QT3T72RIV" disconnecting.
[2020:12:07:22:47:49.797 DBG] Connection id "0HM4QT3T72RIV" stopped.
[2020:12:07:22:47:49.811 INF] Request starting HTTP/1.1 GET http://localhost:5000/images - -
[2020:12:07:22:47:49.813 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:47:49.836 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:47:49.838 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:47:49.839 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:47:49.839 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:47:49.847 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:47:49.965 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:47:49.966 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:47:49.966 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:47:49.966 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:47:49.966 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:47:49.966 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:47:49.967 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:47:50.045 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 76.4826ms
[2020:12:07:22:47:50.062 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:47:50.087 ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'WebScraper.Contracts.IMassFileDownloader`1[WebScraper.Models.ImageInfo]' while attempting to activate 'WebScraper.Controllers.ImagesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method8(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:47:50.198 DBG] Connection id "0HM4QT3T72RJ0" completed keep alive response.
[2020:12:07:22:47:50.199 INF] Request finished HTTP/1.1 GET http://localhost:5000/images - - - 500 - text/plain 389.7081ms
[2020:12:07:22:48:32.883 INF] Creating the host
[2020:12:07:22:48:33.223 INF] Starting up the host
[2020:12:07:22:48:33.226 DBG] Hosting starting
[2020:12:07:22:48:33.415 INF] Now listening on: http://localhost:5000
[2020:12:07:22:48:33.416 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:48:33.416 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:48:33.416 INF] Hosting environment: Development
[2020:12:07:22:48:33.416 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:48:33.416 DBG] Hosting started
[2020:12:07:22:48:40.129 DBG] Connection id "0HM4QT4C798G6" received FIN.
[2020:12:07:22:48:40.139 DBG] Connection id "0HM4QT4C798G6" accepted.
[2020:12:07:22:48:40.139 DBG] Connection id "0HM4QT4C798G6" started.
[2020:12:07:22:48:40.146 DBG] Connection id "0HM4QT4C798G7" accepted.
[2020:12:07:22:48:40.146 DBG] Connection id "0HM4QT4C798G7" started.
[2020:12:07:22:48:40.150 DBG] Connection id "0HM4QT4C798G6" sending FIN because: "The client closed the connection."
[2020:12:07:22:48:40.152 DBG] Connection id "0HM4QT4C798G6" disconnecting.
[2020:12:07:22:48:40.152 DBG] Connection id "0HM4QT4C798G6" stopped.
[2020:12:07:22:48:40.169 INF] Request starting HTTP/1.1 GET http://localhost:5000/images - -
[2020:12:07:22:48:40.171 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:48:40.192 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:48:40.194 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:48:40.194 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:48:40.195 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:48:40.205 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:48:40.242 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:48:40.242 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:48:40.242 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:48:40.242 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:48:40.243 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:48:40.243 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:48:40.243 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:48:40.245 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:48:40.257 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:48:40.258 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name '' in request data ...
[2020:12:07:22:48:40.259 DBG] Could not find a value in the request with name '' for binding parameter 'url' of type 'System.String'.
[2020:12:07:22:48:40.259 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:48:40.259 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:48:40.259 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:48:40.263 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:48:40.264 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:48:40.264 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name '' in request data ...
[2020:12:07:22:48:40.265 DBG] Could not find a value in the request with name '' for binding parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:48:40.265 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:48:40.265 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name '' in request data ...
[2020:12:07:22:48:40.265 DBG] Could not find a value in the request with name '' for binding parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:48:40.265 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:48:40.266 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:48:40.266 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:48:40.267 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:48:40.268 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:48:40.270 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:48:40.270 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:48:40.271 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:48:40.271 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:48:40.312 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 66.9291ms
[2020:12:07:22:48:40.312 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:48:40.313 DBG] Connection id "0HM4QT4C798G7" completed keep alive response.
[2020:12:07:22:48:40.314 INF] Request finished HTTP/1.1 GET http://localhost:5000/images - - - 400 - application/problem+json;+charset=utf-8 145.5755ms
[2020:12:07:22:50:24.580 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imagesCount=1 - -
[2020:12:07:22:50:24.580 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:50:24.581 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:50:24.581 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:24.581 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:24.581 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:50:24.582 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:50:24.582 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:50:24.582 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:50:24.582 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:50:24.582 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:50:24.582 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:50:24.595 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:50:24.599 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:50:24.608 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:50:24.608 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:50:24.608 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:50:24.608 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:50:24.609 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:50:24.609 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:50:24.609 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:50:24.609 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:50:24.609 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:50:24.609 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name '' in request data ...
[2020:12:07:22:50:24.609 DBG] Could not find a value in the request with name '' for binding parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:24.609 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:50:24.609 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:24.610 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:50:24.610 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:50:24.610 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:50:24.610 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:50:24.610 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:50:24.610 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:50:24.610 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:50:24.610 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 28.4698ms
[2020:12:07:22:50:24.610 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:24.610 DBG] Connection id "0HM4QT4C798G7" completed keep alive response.
[2020:12:07:22:50:24.611 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imagesCount=1 - - - 400 - application/problem+json;+charset=utf-8 30.5636ms
[2020:12:07:22:50:31.701 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imageCount=1 - -
[2020:12:07:22:50:31.701 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:50:31.701 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:50:31.701 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:31.701 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:31.701 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:50:31.701 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:50:31.701 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:50:31.701 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:50:31.702 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:50:31.702 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:50:31.702 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:50:31.703 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:50:31.703 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:50:31.703 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:50:31.703 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:50:31.703 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:50:31.703 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:50:31.703 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:50:31.703 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:50:31.703 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:50:31.704 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:31.704 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:31.704 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:50:31.704 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:50:31.704 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:50:31.704 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:50:31.704 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:31.704 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:31.704 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:50:31.704 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:50:31.707 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:50:31.707 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:50:31.707 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2020:12:07:22:50:31.707 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2020:12:07:22:50:31.707 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2020:12:07:22:50:31.707 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
[2020:12:07:22:50:31.709 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 7.0151ms
[2020:12:07:22:50:31.709 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:50:31.709 DBG] Connection id "0HM4QT4C798G7" completed keep alive response.
[2020:12:07:22:50:31.709 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imageCount=1 - - - 400 - application/json;+charset=utf-8 8.3221ms
[2020:12:07:22:51:04.346 INF] Creating the host
[2020:12:07:22:51:04.678 INF] Starting up the host
[2020:12:07:22:51:04.682 DBG] Hosting starting
[2020:12:07:22:51:04.846 INF] Now listening on: http://localhost:5000
[2020:12:07:22:51:04.847 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:51:04.847 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:51:04.847 INF] Hosting environment: Development
[2020:12:07:22:51:04.847 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:51:04.847 DBG] Hosting started
[2020:12:07:22:51:09.603 DBG] Connection id "0HM4QT5OOP692" received FIN.
[2020:12:07:22:51:09.613 DBG] Connection id "0HM4QT5OOP692" accepted.
[2020:12:07:22:51:09.614 DBG] Connection id "0HM4QT5OOP692" started.
[2020:12:07:22:51:09.620 DBG] Connection id "0HM4QT5OOP693" accepted.
[2020:12:07:22:51:09.620 DBG] Connection id "0HM4QT5OOP693" started.
[2020:12:07:22:51:09.623 DBG] Connection id "0HM4QT5OOP692" sending FIN because: "The client closed the connection."
[2020:12:07:22:51:09.625 DBG] Connection id "0HM4QT5OOP692" disconnecting.
[2020:12:07:22:51:09.629 DBG] Connection id "0HM4QT5OOP692" stopped.
[2020:12:07:22:51:09.642 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?threadCount=1000&imageCount=1 - -
[2020:12:07:22:51:09.644 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:51:09.663 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:51:09.665 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:51:09.665 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:09.666 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:09.673 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:51:09.711 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:51:09.712 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:51:09.712 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:51:09.712 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:51:09.712 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:51:09.712 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:51:09.713 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:09.714 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:09.725 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:09.727 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name '' in request data ...
[2020:12:07:22:51:09.727 DBG] Could not find a value in the request with name '' for binding parameter 'url' of type 'System.String'.
[2020:12:07:22:51:09.728 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:09.728 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:09.728 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:09.731 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:51:09.733 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:09.733 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:51:09.733 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:09.733 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:09.733 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:09.734 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:09.734 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:09.734 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:51:09.734 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:09.734 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:09.734 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:09.734 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:09.734 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:51:09.735 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:51:09.736 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:51:09.738 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:51:09.738 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:51:09.738 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:51:09.739 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:51:09.761 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 46.7946ms
[2020:12:07:22:51:09.762 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:09.762 DBG] Connection id "0HM4QT5OOP693" completed keep alive response.
[2020:12:07:22:51:09.763 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?threadCount=1000&imageCount=1 - - - 400 - application/problem+json;+charset=utf-8 121.7263ms
[2020:12:07:22:51:17.692 INF] Creating the host
[2020:12:07:22:51:18.010 INF] Starting up the host
[2020:12:07:22:51:18.014 DBG] Hosting starting
[2020:12:07:22:51:18.188 INF] Now listening on: http://localhost:5000
[2020:12:07:22:51:18.189 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:51:18.189 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:51:18.189 INF] Hosting environment: Development
[2020:12:07:22:51:18.189 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:51:18.189 DBG] Hosting started
[2020:12:07:22:51:23.387 DBG] Connection id "0HM4QT5SS7N61" received FIN.
[2020:12:07:22:51:23.399 DBG] Connection id "0HM4QT5SS7N61" accepted.
[2020:12:07:22:51:23.400 DBG] Connection id "0HM4QT5SS7N61" started.
[2020:12:07:22:51:23.405 DBG] Connection id "0HM4QT5SS7N62" accepted.
[2020:12:07:22:51:23.405 DBG] Connection id "0HM4QT5SS7N62" started.
[2020:12:07:22:51:23.409 DBG] Connection id "0HM4QT5SS7N61" sending FIN because: "The client closed the connection."
[2020:12:07:22:51:23.411 DBG] Connection id "0HM4QT5SS7N61" disconnecting.
[2020:12:07:22:51:23.412 DBG] Connection id "0HM4QT5SS7N61" stopped.
[2020:12:07:22:51:23.426 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?threadCount=1000&imageCount=1 - -
[2020:12:07:22:51:23.427 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:51:23.446 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:51:23.449 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:51:23.449 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:23.449 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:23.457 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:51:23.493 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:51:23.494 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:51:23.494 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:51:23.494 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:51:23.495 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:51:23.495 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:51:23.495 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:23.497 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:23.507 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:23.509 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name '' in request data ...
[2020:12:07:22:51:23.510 DBG] Could not find a value in the request with name '' for binding parameter 'url' of type 'System.String'.
[2020:12:07:22:51:23.510 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:23.510 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:23.510 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:23.514 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:51:23.515 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:23.515 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:51:23.515 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:23.515 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:23.515 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:23.516 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:23.516 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:23.516 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:51:23.516 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:23.516 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:23.516 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:23.516 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:23.517 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:51:23.517 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:51:23.518 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:51:23.520 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:51:23.520 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:51:23.520 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:51:23.521 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:51:23.542 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 45.269ms
[2020:12:07:22:51:23.543 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:23.543 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:51:23.544 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?threadCount=1000&imageCount=1 - - - 400 - application/problem+json;+charset=utf-8 119.5403ms
[2020:12:07:22:51:34.025 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imageCount=1 - -
[2020:12:07:22:51:34.025 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:51:34.025 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:51:34.025 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:34.026 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:34.026 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:51:34.026 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:51:34.026 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:51:34.026 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:51:34.026 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:51:34.026 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:51:34.026 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:34.028 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:51:34.032 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:34.032 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:51:34.032 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:34.032 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:51:34.032 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:51:34.033 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:51:34.033 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:34.033 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:51:34.033 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:34.033 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:34.033 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:51:34.033 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:51:34.033 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:34.033 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:51:34.033 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:34.033 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:34.033 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:51:34.033 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:51:34.037 DBG] : Timeout
[2020:12:07:22:51:34.038 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:51:34.398 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 371.3851ms
[2020:12:07:22:51:34.411 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:51:34.432 ERR] An unhandled exception has occurred while executing the request.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)
   at WebScraper.Services.Scraper.ScrapeImagesAsync(String url, Int32 imageCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\Scraper.cs:line 38
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:51:34.497 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:51:34.497 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1000&imageCount=1 - - - 500 - text/plain 472.3956ms
[2020:12:07:22:52:08.325 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=0&imageCount=1 - -
[2020:12:07:22:52:08.325 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:52:08.325 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:52:08.325 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:08.325 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:08.325 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:52:08.325 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:52:08.325 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:52:08.325 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:52:08.325 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:52:08.325 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:52:08.326 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:08.326 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:52:08.327 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:08.327 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:08.327 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:08.327 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:52:08.327 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:08.327 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:08.327 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:08.327 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:08.327 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:52:08.328 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:08.328 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:08.328 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:08.328 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:08.328 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:52:08.328 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:52:08.328 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:52:08.331 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:52:08.331 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:52:08.331 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:52:08.331 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:52:08.331 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 5.885ms
[2020:12:07:22:52:08.331 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:08.332 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:52:08.332 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=0&imageCount=1 - - - 400 - application/problem+json;+charset=utf-8 7.0235ms
[2020:12:07:22:52:21.480 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=htt;j00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=0&imageCount=1 - -
[2020:12:07:22:52:21.481 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:52:21.481 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:52:21.481 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:21.481 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:21.481 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:52:21.481 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:52:21.481 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:52:21.481 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:52:21.482 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:52:21.482 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:52:21.482 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:21.482 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:21.482 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:21.482 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:52:21.482 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:21.482 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:21.483 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:21.483 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:52:21.483 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:21.483 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:52:21.483 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:21.483 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:21.483 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:21.483 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:21.483 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:21.483 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:52:21.483 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:21.484 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:21.484 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:21.484 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:21.484 DBG] The request has model state errors, returning an error response.
[2020:12:07:22:52:21.484 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[2020:12:07:22:52:21.484 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:52:21.484 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:52:21.484 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
[2020:12:07:22:52:21.484 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[2020:12:07:22:52:21.484 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2020:12:07:22:52:21.485 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 2.7884ms
[2020:12:07:22:52:21.485 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:21.485 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:52:21.485 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=htt;j00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=0&imageCount=1 - - - 400 - application/problem+json;+charset=utf-8 4.4867ms
[2020:12:07:22:52:27.603 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=htt;j00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:52:27.603 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:52:27.603 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:52:27.603 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:27.603 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:27.603 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:52:27.603 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:52:27.603 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:52:27.604 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:52:27.604 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:52:27.604 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:52:27.604 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:27.604 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:27.604 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:27.604 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:52:27.604 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:27.604 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:27.604 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:27.604 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:52:27.604 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:27.604 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:52:27.605 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:27.605 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:27.605 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:27.605 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:27.605 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:27.605 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:52:27.605 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:27.605 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:27.605 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:27.605 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:27.607 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2020:12:07:22:52:27.607 DBG] No information found on request to perform content negotiation.
[2020:12:07:22:52:27.607 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2020:12:07:22:52:27.607 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2020:12:07:22:52:27.608 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2020:12:07:22:52:27.608 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
[2020:12:07:22:52:27.611 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 6.9566ms
[2020:12:07:22:52:27.611 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:27.611 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:52:27.611 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=htt;j00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 400 - application/json;+charset=utf-8 8.1994ms
[2020:12:07:22:52:54.018 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:52:54.018 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:52:54.018 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:52:54.018 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:54.018 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:54.018 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:52:54.018 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:52:54.018 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:52:54.018 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:52:54.018 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:52:54.018 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:52:54.019 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:54.019 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:52:54.019 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:54.019 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:52:54.019 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:54.019 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:52:54.019 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:52:54.019 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:52:54.019 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:54.019 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:52:54.019 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:54.019 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:54.019 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:52:54.020 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:52:54.020 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:54.020 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:52:54.020 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:54.020 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:54.020 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:52:54.020 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:52:54.020 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:52:54.024 DBG] : Timeout
[2020:12:07:22:52:54.228 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 209.685ms
[2020:12:07:22:52:54.239 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:52:54.259 ERR] An unhandled exception has occurred while executing the request.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)
   at WebScraper.Services.Scraper.ScrapeImagesAsync(String url, Int32 imageCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\Scraper.cs:line 38
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:52:54.273 DBG] Connection id "0HM4QT5SS7N62" completed keep alive response.
[2020:12:07:22:52:54.274 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 256.3521ms
[2020:12:07:22:53:01.600 INF] Creating the host
[2020:12:07:22:53:01.929 INF] Starting up the host
[2020:12:07:22:53:01.933 DBG] Hosting starting
[2020:12:07:22:53:02.102 INF] Now listening on: http://localhost:5000
[2020:12:07:22:53:02.103 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:53:02.103 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:53:02.105 INF] Hosting environment: Development
[2020:12:07:22:53:02.106 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:53:02.106 DBG] Hosting started
[2020:12:07:22:53:05.570 DBG] Connection id "0HM4QT6RANDIF" received FIN.
[2020:12:07:22:53:05.581 DBG] Connection id "0HM4QT6RANDIF" accepted.
[2020:12:07:22:53:05.582 DBG] Connection id "0HM4QT6RANDIF" started.
[2020:12:07:22:53:05.587 DBG] Connection id "0HM4QT6RANDIG" accepted.
[2020:12:07:22:53:05.587 DBG] Connection id "0HM4QT6RANDIG" started.
[2020:12:07:22:53:05.591 DBG] Connection id "0HM4QT6RANDIF" sending FIN because: "The client closed the connection."
[2020:12:07:22:53:05.593 DBG] Connection id "0HM4QT6RANDIF" disconnecting.
[2020:12:07:22:53:05.594 DBG] Connection id "0HM4QT6RANDIF" stopped.
[2020:12:07:22:53:05.613 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:53:05.614 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:53:05.639 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:53:05.641 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:53:05.642 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:53:05.642 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:53:05.653 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:53:05.699 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:53:05.700 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:53:05.700 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:53:05.700 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:53:05.700 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:53:05.701 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:53:05.702 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:53:05.705 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:53:05.718 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:53:05.721 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:53:05.721 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:53:05.721 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:53:05.721 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:53:05.725 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:53:05.726 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:53:05.727 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:53:05.727 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:05.727 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:05.727 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:53:05.728 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:05.728 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:53:05.728 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:53:05.728 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:53:05.728 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:53:05.728 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:53:05.728 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:53:09.137 DBG] : Timeout
[2020:12:07:22:53:09.138 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:53:09.422 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 3717.6854ms
[2020:12:07:22:53:09.436 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:53:09.458 ERR] An unhandled exception has occurred while executing the request.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)
   at WebScraper.Services.Scraper.ScrapeImagesAsync(String url, Int32 imageCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\Scraper.cs:line 38
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:53:09.523 DBG] Connection id "0HM4QT6RANDIG" completed keep alive response.
[2020:12:07:22:53:09.524 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 3912.6348ms
[2020:12:07:22:53:35.730 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:53:35.730 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:53:35.730 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:53:35.730 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:53:35.730 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:53:35.731 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:53:35.731 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:53:35.731 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:53:35.731 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:53:35.731 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:53:35.731 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:53:35.731 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:53:35.744 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:53:35.744 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:53:35.744 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:53:35.745 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:53:35.745 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:53:35.745 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:53:35.745 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:35.745 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:53:35.745 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:53:35.745 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:53:35.745 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:53:35.745 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:53:35.745 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:53:35.745 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:54:22.461 INF] Creating the host
[2020:12:07:22:54:22.818 INF] Starting up the host
[2020:12:07:22:54:22.822 DBG] Hosting starting
[2020:12:07:22:54:22.999 INF] Now listening on: http://localhost:5000
[2020:12:07:22:54:23.000 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:54:23.000 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:54:23.001 INF] Hosting environment: Development
[2020:12:07:22:54:23.001 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:54:23.001 DBG] Hosting started
[2020:12:07:22:54:30.825 DBG] Connection id "0HM4QT7KNP2IC" received FIN.
[2020:12:07:22:54:30.834 DBG] Connection id "0HM4QT7KNP2IC" accepted.
[2020:12:07:22:54:30.835 DBG] Connection id "0HM4QT7KNP2IC" started.
[2020:12:07:22:54:30.841 DBG] Connection id "0HM4QT7KNP2ID" accepted.
[2020:12:07:22:54:30.841 DBG] Connection id "0HM4QT7KNP2ID" started.
[2020:12:07:22:54:30.845 DBG] Connection id "0HM4QT7KNP2IC" sending FIN because: "The client closed the connection."
[2020:12:07:22:54:30.847 DBG] Connection id "0HM4QT7KNP2IC" disconnecting.
[2020:12:07:22:54:30.848 DBG] Connection id "0HM4QT7KNP2IC" stopped.
[2020:12:07:22:54:30.862 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:54:30.863 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:54:30.883 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:54:30.885 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:54:30.885 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:54:30.885 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:54:30.893 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:54:30.938 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:54:30.939 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:54:30.939 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:54:30.939 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:54:30.939 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:54:30.939 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:54:30.940 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:54:30.941 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:54:30.952 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:54:30.954 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:54:30.955 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:54:30.955 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:54:30.955 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:54:30.958 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:54:30.959 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:54:30.960 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:54:30.960 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:54:30.960 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:54:30.960 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:54:30.960 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:54:30.960 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:54:30.960 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:54:30.960 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:54:30.960 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:54:30.960 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:54:30.960 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:54:30.964 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:54:31.813 DBG] read html
[2020:12:07:22:54:31.814 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:54:31.815 DBG] parse html and find IMG tags
[2020:12:07:22:54:31.815 DBG] 1 IMG tags found
[2020:12:07:22:54:31.817 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:54:32.070 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 1128.3325ms
[2020:12:07:22:54:32.106 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:54:32.185 ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: Access to the path 'C:\Users\WebScraper\.files\images\2020\12' is denied.
   at System.IO.FileSystem.CreateDirectory(String fullPath, Byte[] securityDescriptor)
   at System.IO.Directory.CreateDirectory(String path)
   at WebScraper.Services.ImagesDownloader.DownloadAsync(IEnumerable`1 sources, Int32 threadCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 40
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:54:32.245 DBG] Connection id "0HM4QT7KNP2ID" completed keep alive response.
[2020:12:07:22:54:32.246 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 1385.6189ms
[2020:12:07:22:55:30.972 DBG] : Timeout
[2020:12:07:22:56:24.707 INF] Creating the host
[2020:12:07:22:56:25.068 INF] Starting up the host
[2020:12:07:22:56:25.072 DBG] Hosting starting
[2020:12:07:22:56:25.261 INF] Now listening on: http://localhost:5000
[2020:12:07:22:56:25.262 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:56:25.262 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:56:25.262 INF] Hosting environment: Development
[2020:12:07:22:56:25.262 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:56:25.262 DBG] Hosting started
[2020:12:07:22:56:28.660 DBG] Connection id "0HM4QT8NRHMOJ" received FIN.
[2020:12:07:22:56:28.671 DBG] Connection id "0HM4QT8NRHMOJ" accepted.
[2020:12:07:22:56:28.673 DBG] Connection id "0HM4QT8NRHMOJ" started.
[2020:12:07:22:56:28.678 DBG] Connection id "0HM4QT8NRHMOK" accepted.
[2020:12:07:22:56:28.678 DBG] Connection id "0HM4QT8NRHMOK" started.
[2020:12:07:22:56:28.683 DBG] Connection id "0HM4QT8NRHMOJ" sending FIN because: "The client closed the connection."
[2020:12:07:22:56:28.685 DBG] Connection id "0HM4QT8NRHMOJ" disconnecting.
[2020:12:07:22:56:28.686 DBG] Connection id "0HM4QT8NRHMOJ" stopped.
[2020:12:07:22:56:28.703 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:56:28.705 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:56:28.731 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:56:28.733 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:56:28.734 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:56:28.734 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:56:28.743 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:56:28.787 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:56:28.788 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:56:28.788 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:56:28.788 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:56:28.788 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:56:28.788 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:56:28.789 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:56:28.790 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:56:28.801 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:56:28.803 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:56:28.803 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:56:28.803 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:56:28.804 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:56:28.807 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:56:28.808 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:56:28.808 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:56:28.808 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:56:28.808 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:56:28.808 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:56:28.809 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:56:28.809 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:56:28.809 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:56:28.809 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:56:28.809 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:56:28.809 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:56:28.810 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:56:28.814 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:56:29.408 DBG] read html
[2020:12:07:22:56:29.410 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:56:29.410 DBG] parse html and find IMG tags
[2020:12:07:22:56:29.411 DBG] 1 IMG tags found
[2020:12:07:22:56:29.411 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:56:29.418 DBG] downloading 1 images in 1 threads
[2020:12:07:22:56:29.697 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 906.5087ms
[2020:12:07:22:56:29.728 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:56:29.796 ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An invalid request URI was provided. The request URI must either be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.CheckRequestBeforeSend(HttpRequestMessage request)
   at System.Net.Http.HttpClient.GetByteArrayAsync(Uri requestUri, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.GetByteArrayAsync(String requestUri, CancellationToken cancellationToken)
   at WebScraper.Services.ImagesDownloader.<>c__DisplayClass6_1.<<DownloadAsync>b__0>d.MoveNext() in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 59
--- End of stack trace from previous location ---
   at WebScraper.Services.ImagesDownloader.DownloadAsync(IEnumerable`1 sources, Int32 threadCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 81
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:56:29.858 DBG] Connection id "0HM4QT8NRHMOK" completed keep alive response.
[2020:12:07:22:56:29.860 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 1157.9386ms
[2020:12:07:22:57:28.817 DBG] : Timeout
[2020:12:07:22:57:51.800 INF] Creating the host
[2020:12:07:22:57:52.159 INF] Starting up the host
[2020:12:07:22:57:52.162 DBG] Hosting starting
[2020:12:07:22:57:52.350 INF] Now listening on: http://localhost:5000
[2020:12:07:22:57:52.351 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:57:52.351 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:57:52.351 INF] Hosting environment: Development
[2020:12:07:22:57:52.351 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:57:52.351 DBG] Hosting started
[2020:12:07:22:58:43.497 INF] Creating the host
[2020:12:07:22:58:43.880 INF] Starting up the host
[2020:12:07:22:58:43.884 DBG] Hosting starting
[2020:12:07:22:58:44.096 INF] Now listening on: http://localhost:5000
[2020:12:07:22:58:44.096 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:58:44.097 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:58:44.097 INF] Hosting environment: Development
[2020:12:07:22:58:44.097 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:58:44.097 DBG] Hosting started
[2020:12:07:22:58:44.161 DBG] Connection id "0HM4QTA07P52H" received FIN.
[2020:12:07:22:58:44.172 DBG] Connection id "0HM4QTA07P52H" accepted.
[2020:12:07:22:58:44.173 DBG] Connection id "0HM4QTA07P52H" started.
[2020:12:07:22:58:44.179 DBG] Connection id "0HM4QTA07P52I" accepted.
[2020:12:07:22:58:44.179 DBG] Connection id "0HM4QTA07P52I" started.
[2020:12:07:22:58:44.183 DBG] Connection id "0HM4QTA07P52H" sending FIN because: "The client closed the connection."
[2020:12:07:22:58:44.185 DBG] Connection id "0HM4QTA07P52H" disconnecting.
[2020:12:07:22:58:44.186 DBG] Connection id "0HM4QTA07P52H" stopped.
[2020:12:07:22:58:44.200 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:58:44.202 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:58:44.223 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:58:44.225 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:58:44.226 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:58:44.226 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:58:44.234 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:58:44.278 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:58:44.279 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:58:44.279 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:58:44.279 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:58:44.279 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:58:44.279 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:58:44.280 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:58:44.332 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:58:44.344 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:58:44.347 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:58:44.347 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:58:44.347 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:58:44.347 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:58:44.350 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:58:44.352 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:58:44.352 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:58:44.352 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:58:44.352 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:58:44.352 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:58:44.352 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:58:44.352 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:58:44.353 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:58:44.353 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:58:44.353 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:58:44.353 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:58:44.354 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:58:44.358 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:58:45.047 DBG] read html
[2020:12:07:22:58:45.048 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:58:45.048 DBG] parse html and find IMG tags
[2020:12:07:22:58:45.049 DBG] 1 IMG tags found
[2020:12:07:22:58:45.050 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:22:58:45.308 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 1025.2631ms
[2020:12:07:22:58:45.344 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:58:45.423 ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException:     ,     . : 'C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\.files\images\07.12.2020 0:00:00'
   at System.IO.FileSystem.CreateDirectory(String fullPath, Byte[] securityDescriptor)
   at System.IO.Directory.CreateDirectory(String path)
   at WebScraper.Services.ImagesDownloader.DownloadAsync(IEnumerable`1 sources, Int32 threadCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 40
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:22:58:45.485 DBG] Connection id "0HM4QTA07P52I" completed keep alive response.
[2020:12:07:22:58:45.486 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 1286.9323ms
[2020:12:07:22:59:44.371 DBG] : Timeout
[2020:12:07:22:59:57.346 INF] Creating the host
[2020:12:07:22:59:57.719 INF] Starting up the host
[2020:12:07:22:59:57.723 DBG] Hosting starting
[2020:12:07:22:59:57.902 INF] Now listening on: http://localhost:5000
[2020:12:07:22:59:57.903 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:22:59:57.903 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:22:59:57.903 INF] Hosting environment: Development
[2020:12:07:22:59:57.903 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:22:59:57.903 DBG] Hosting started
[2020:12:07:22:59:59.329 DBG] Connection id "0HM4QTAMKKIMD" received FIN.
[2020:12:07:22:59:59.338 DBG] Connection id "0HM4QTAMKKIMD" accepted.
[2020:12:07:22:59:59.339 DBG] Connection id "0HM4QTAMKKIMD" started.
[2020:12:07:22:59:59.345 DBG] Connection id "0HM4QTAMKKIME" accepted.
[2020:12:07:22:59:59.345 DBG] Connection id "0HM4QTAMKKIME" started.
[2020:12:07:22:59:59.349 DBG] Connection id "0HM4QTAMKKIMD" sending FIN because: "The client closed the connection."
[2020:12:07:22:59:59.351 DBG] Connection id "0HM4QTAMKKIMD" disconnecting.
[2020:12:07:22:59:59.355 DBG] Connection id "0HM4QTAMKKIMD" stopped.
[2020:12:07:22:59:59.368 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:22:59:59.370 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:22:59:59.390 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:22:59:59.392 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:22:59:59.392 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:59:59.392 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:22:59:59.400 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:22:59:59.437 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:22:59:59.438 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:22:59:59.438 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:22:59:59.438 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:22:59:59.438 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:22:59:59.438 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:22:59:59.439 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:59:59.445 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:22:59:59.456 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:22:59:59.458 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:22:59:59.458 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:59:59.458 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:22:59:59.458 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:22:59:59.461 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:22:59:59.463 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:59:59.463 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:22:59:59.463 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:59:59.463 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:59:59.463 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:22:59:59.463 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:22:59:59.463 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:59:59.463 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:22:59:59.463 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:59:59.463 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:59:59.463 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:22:59:59.464 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:22:59:59.467 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:00:00.008 DBG] read html
[2020:12:07:23:00:00.009 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:00:00.009 DBG] parse html and find IMG tags
[2020:12:07:23:00:00.010 DBG] 1 IMG tags found
[2020:12:07:23:00:00.011 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:00:00.014 DBG] downloading 1 images in 1 threads
[2020:12:07:23:00:00.245 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 804.1479ms
[2020:12:07:23:00:00.277 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:00:00.349 ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An invalid request URI was provided. The request URI must either be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.CheckRequestBeforeSend(HttpRequestMessage request)
   at System.Net.Http.HttpClient.GetByteArrayAsync(Uri requestUri, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.GetByteArrayAsync(String requestUri, CancellationToken cancellationToken)
   at WebScraper.Services.ImagesDownloader.<>c__DisplayClass6_1.<<DownloadAsync>b__0>d.MoveNext() in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 59
--- End of stack trace from previous location ---
   at WebScraper.Services.ImagesDownloader.DownloadAsync(IEnumerable`1 sources, Int32 threadCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 81
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:23:00:00.412 DBG] Connection id "0HM4QTAMKKIME" completed keep alive response.
[2020:12:07:23:00:00.413 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - - - 500 - text/plain 1045.9875ms
[2020:12:07:23:00:45.365 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:23:00:45.366 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:23:00:45.366 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:23:00:45.366 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:00:45.366 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:00:45.366 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:23:00:45.366 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:23:00:45.366 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:23:00:45.366 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:23:00:45.366 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:23:00:45.367 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:23:00:45.367 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:00:45.379 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:00:45.380 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:23:00:45.380 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:23:00:45.380 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:00:45.380 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:00:45.380 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:23:00:45.380 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:23:00:45.380 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:00:45.380 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:23:00:45.380 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:00:45.380 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:00:45.380 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:00:45.380 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:00:45.381 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:00:45.381 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:23:00:45.381 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:00:45.381 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:00:45.381 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:00:45.381 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:00:45.381 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:00:45.667 DBG] read html
[2020:12:07:23:00:45.668 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:00:45.668 DBG] parse html and find IMG tags
[2020:12:07:23:00:45.668 DBG] 1 IMG tags found
[2020:12:07:23:00:45.668 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:02:30.927 INF] Creating the host
[2020:12:07:23:02:31.273 INF] Starting up the host
[2020:12:07:23:02:31.277 DBG] Hosting starting
[2020:12:07:23:02:31.454 INF] Now listening on: http://localhost:5000
[2020:12:07:23:02:31.455 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:23:02:31.455 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:23:02:31.455 INF] Hosting environment: Development
[2020:12:07:23:02:31.455 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:23:02:31.455 DBG] Hosting started
[2020:12:07:23:02:36.046 DBG] Connection id "0HM4QTC5B6MKS" received FIN.
[2020:12:07:23:02:36.056 DBG] Connection id "0HM4QTC5B6MKS" accepted.
[2020:12:07:23:02:36.057 DBG] Connection id "0HM4QTC5B6MKS" started.
[2020:12:07:23:02:36.062 DBG] Connection id "0HM4QTC5B6MKT" accepted.
[2020:12:07:23:02:36.063 DBG] Connection id "0HM4QTC5B6MKT" started.
[2020:12:07:23:02:36.066 DBG] Connection id "0HM4QTC5B6MKS" sending FIN because: "The client closed the connection."
[2020:12:07:23:02:36.068 DBG] Connection id "0HM4QTC5B6MKS" disconnecting.
[2020:12:07:23:02:36.069 DBG] Connection id "0HM4QTC5B6MKS" stopped.
[2020:12:07:23:02:36.086 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.google.com/search?q=google%26sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080%26source=lnms%26tbm=isch%26sa=X%26ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ%26biw=1336%26bih=643&threadCount=1&imageCount=1 - -
[2020:12:07:23:02:36.087 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:23:02:36.107 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:23:02:36.109 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:23:02:36.109 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:02:36.109 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:02:36.120 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:23:02:36.157 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:23:02:36.157 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:23:02:36.157 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:23:02:36.158 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:23:02:36.158 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:23:02:36.158 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:23:02:36.158 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:02:36.165 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:02:36.176 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:23:02:36.178 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:23:02:36.178 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:02:36.178 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:02:36.178 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:23:02:36.182 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:23:02:36.183 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:02:36.183 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:23:02:36.183 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:02:36.183 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:02:36.183 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:02:36.184 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:02:36.184 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:02:36.184 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:23:02:36.184 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:02:36.184 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:02:36.184 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:02:36.184 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:02:36.188 DBG] send request to https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:02:36.687 DBG] read html
[2020:12:07:23:02:36.688 DBG] scrape 1 images from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:02:36.689 DBG] parse html and find IMG tags
[2020:12:07:23:02:36.689 DBG] 1 IMG tags found
[2020:12:07:23:02:36.690 DBG] 1 images scraped from https://www.google.com/search?q=google&sxsrf=ALeKk01PlpcEY00tsBJc8g44c5x_XstJPw:1607370560080&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjruIX60bztAhUtlYsKHXykBMEQ_AUoA3oECAcQBQ&biw=1336&bih=643
[2020:12:07:23:03:21.390 INF] Creating the host
[2020:12:07:23:03:21.740 INF] Starting up the host
[2020:12:07:23:03:21.744 DBG] Hosting starting
[2020:12:07:23:03:21.923 INF] Now listening on: http://localhost:5000
[2020:12:07:23:03:21.925 DBG] Loaded hosting startup assembly WebScraper
[2020:12:07:23:03:21.925 INF] Application started. Press Ctrl+C to shut down.
[2020:12:07:23:03:21.925 INF] Hosting environment: Development
[2020:12:07:23:03:21.925 INF] Content root path: C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper
[2020:12:07:23:03:21.925 DBG] Hosting started
[2020:12:07:23:03:23.958 DBG] Connection id "0HM4QTCJK4K4B" received FIN.
[2020:12:07:23:03:23.971 DBG] Connection id "0HM4QTCJK4K4B" accepted.
[2020:12:07:23:03:23.972 DBG] Connection id "0HM4QTCJK4K4B" started.
[2020:12:07:23:03:23.979 DBG] Connection id "0HM4QTCJK4K4C" accepted.
[2020:12:07:23:03:23.980 DBG] Connection id "0HM4QTCJK4K4C" started.
[2020:12:07:23:03:23.983 DBG] Connection id "0HM4QTCJK4K4B" sending FIN because: "The client closed the connection."
[2020:12:07:23:03:23.985 DBG] Connection id "0HM4QTCJK4K4B" disconnecting.
[2020:12:07:23:03:23.986 DBG] Connection id "0HM4QTCJK4K4B" stopped.
[2020:12:07:23:03:24.004 INF] Request starting HTTP/1.1 GET http://localhost:5000/images?url=https://www.cloudimage.io/en/home&threadCount=1&imageCount=1 - -
[2020:12:07:23:03:24.005 DBG] Wildcard detected, all requests with hosts will be allowed.
[2020:12:07:23:03:24.025 DBG] 1 candidate(s) found for the request path '/images'
[2020:12:07:23:03:24.027 DBG] Endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)' with route pattern 'Images' is valid for the request path '/images'
[2020:12:07:23:03:24.028 DBG] Request matched endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:03:24.028 INF] Executing endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:03:24.039 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2020:12:07:23:03:24.075 INF] Route matched with {action = "Get", controller = "Images"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAsync(System.String, Int32, Int32) on controller WebScraper.Controllers.ImagesController (WebScraper).
[2020:12:07:23:03:24.076 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2020:12:07:23:03:24.076 DBG] Execution plan of resource filters (in the following order): ["None"]
[2020:12:07:23:03:24.076 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[2020:12:07:23:03:24.076 DBG] Execution plan of exception filters (in the following order): ["None"]
[2020:12:07:23:03:24.077 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2020:12:07:23:03:24.077 DBG] Executing controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:03:24.084 DBG] Executed controller factory for controller WebScraper.Controllers.ImagesController (WebScraper)
[2020:12:07:23:03:24.094 DBG] Attempting to bind parameter 'url' of type 'System.String' ...
[2020:12:07:23:03:24.096 DBG] Attempting to bind parameter 'url' of type 'System.String' using the name 'url' in request data ...
[2020:12:07:23:03:24.097 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:03:24.097 DBG] Done attempting to bind parameter 'url' of type 'System.String'.
[2020:12:07:23:03:24.097 DBG] Attempting to validate the bound parameter 'url' of type 'System.String' ...
[2020:12:07:23:03:24.100 DBG] Done attempting to validate the bound parameter 'url' of type 'System.String'.
[2020:12:07:23:03:24.101 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:03:24.101 DBG] Attempting to bind parameter 'threadCount' of type 'System.Int32' using the name 'threadCount' in request data ...
[2020:12:07:23:03:24.101 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:03:24.101 DBG] Done attempting to bind parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:03:24.102 DBG] Attempting to validate the bound parameter 'threadCount' of type 'System.Int32' ...
[2020:12:07:23:03:24.102 DBG] Done attempting to validate the bound parameter 'threadCount' of type 'System.Int32'.
[2020:12:07:23:03:24.102 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:03:24.102 DBG] Attempting to bind parameter 'imageCount' of type 'System.Int32' using the name 'imageCount' in request data ...
[2020:12:07:23:03:24.102 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:03:24.102 DBG] Done attempting to bind parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:03:24.102 DBG] Attempting to validate the bound parameter 'imageCount' of type 'System.Int32' ...
[2020:12:07:23:03:24.102 DBG] Done attempting to validate the bound parameter 'imageCount' of type 'System.Int32'.
[2020:12:07:23:03:24.106 DBG] send request to https://www.cloudimage.io/en/home
[2020:12:07:23:03:24.684 DBG] read html
[2020:12:07:23:03:24.685 DBG] scrape 1 images from https://www.cloudimage.io/en/home
[2020:12:07:23:03:24.685 DBG] parse html and find IMG tags
[2020:12:07:23:03:24.687 DBG] 23 IMG tags found, take 1 from them
[2020:12:07:23:03:24.687 DBG] 1 images scraped from https://www.cloudimage.io/en/home
[2020:12:07:23:03:43.317 DBG] downloading 1 images in 1 threads
[2020:12:07:23:03:44.793 INF] Executed action WebScraper.Controllers.ImagesController.GetAsync (WebScraper) in 20714.0864ms
[2020:12:07:23:03:44.840 INF] Executed endpoint 'WebScraper.Controllers.ImagesController.GetAsync (WebScraper)'
[2020:12:07:23:03:44.942 ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Parameter is not valid.
   at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData)
   at System.Drawing.Image.FromStream(Stream stream)
   at WebScraper.Services.ImagesDownloader.<>c__DisplayClass6_1.<<DownloadAsync>b__0>d.MoveNext() in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 68
--- End of stack trace from previous location ---
   at WebScraper.Services.ImagesDownloader.DownloadAsync(IEnumerable`1 sources, Int32 threadCount, CancellationToken cancellation) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Services\ImagesDownloader.cs:line 81
   at WebScraper.Controllers.ImagesController.GetAsync(String url, Int32 threadCount, Int32 imageCount) in C:\Users\Work\Desktop\JobTest\WebScraper\WebScraper\src\Controllers\ImagesController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2020:12:07:23:03:45.009 DBG] Connection id "0HM4QTCJK4K4C" completed keep alive response.
[2020:12:07:23:03:45.010 INF] Request finished HTTP/1.1 GET http://localhost:5000/images?url=https://www.cloudimage.io/en/home&threadCount=1&imageCount=1 - - - 500 - text/plain 21007.4714ms
[2020:12:07:23:04:24.112 DBG] : Timeout
